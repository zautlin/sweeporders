MAIN.PY REFACTORING - REVISED SUMMARY
======================================

KEY CORRECTION: CLI args OVERRIDE config, not replace it!
=========================================================

PRIORITY LOGIC:
  ticker = CLI --ticker  OR  config.TICKER (if not provided)
  date   = CLI --date    OR  config.DATE   (if not provided)

WHAT WE'RE DOING:
1. Add TICKER and DATE to config.py (defaults)
2. Add CLI support: --ticker and --date (overrides)
3. Build file paths: {ticker}_{date}_orders.csv
4. Refactor main() into modular functions
5. Compress ALL docstrings to 2 lines max
6. Make unmatched_analyzer clearly FINAL STEP

USAGE EXAMPLES:

  # No args → use config.py defaults
  python src/main.py
  → Uses: config.TICKER='drr', config.DATE='20240905'
  → Looks for: drr_20240905_orders.csv

  # With args → CLI overrides config
  ipython3 src/main.py --ticker cba --date 20240904
  → Uses: ticker='cba', date='20240904'
  → Looks for: cba_20240904_orders.csv

  # Partial override
  ipython3 src/main.py --ticker cba
  → Uses: ticker='cba', date='20240905' (from config)
  → Looks for: cba_20240905_orders.csv

CONFIG.PY CHANGES:
  + Add: TICKER = 'drr'
  + Add: DATE = '20240905'
  + Add: get_input_files(ticker, date) function
  + Add: validate_input_files(files) function
  - Remove: Hardcoded file paths

MAIN.PY CHANGES:
  + Add: parse_arguments() - CLI parsing
  + Add: get_runtime_config() - merge CLI + config
  + Add: setup_directories() - create dirs
  + Add: extract_and_prepare_data() - steps 1-6
  + Add: process_partitions_pipeline() - steps 7-12
  + Add: run_final_analysis() - steps 13-14 (FINAL)
  * Refactor: main() - clean orchestration
  * Update: ALL docstrings to 2 lines max

PIPELINE FLOW (unchanged):
  Steps 1-6:   Data extraction
  Steps 7-12:  Simulation & processing
  Step 13:     Sweep execution analysis
  Step 14:     Unmatched analyzer (FINAL STEP) ⭐

FILE PATTERN:
  data/raw/orders/{ticker}_{date}_orders.csv
  data/raw/trades/{ticker}_{date}_trades.csv
  data/raw/nbbo/{ticker}_{date}_nbbo.csv
  data/raw/session/{ticker}_{date}_session.csv
  etc.

ESTIMATED TIME: 2.5 hours

PLEASE REVIEW: REFACTORING_PLAN_REVISED.md for full details

READY FOR YOUR APPROVAL! ✓
